<?xml version="1.0" encoding="UTF-8"?>
<!--
 *	Mark's Code Fractal CFKBase 3.1 Code Fractal Knowledge Base
 *
 *	Copyright 2016-2025 Mark Stephen Sobkow
 *
 *	This file is part of Mark's Code Fractal CFKBase.
 *
 *	Mark's Code Fractal CFKBase is available under dual commercial license from
 *	Mark Stephen Sobkow, or under the terms of the GNU General Public License,
 *	Version 3 or later.
 *
 *	Mark's Code Fractal CFKBase is free software: you can redistribute it and/or
 *	modify it under the terms of the GNU General Public License as published by
 *	the Free Software Foundation, either version 3 of the License, or
 *	(at your option) any later version.
 *
 *	Mark's Code Fractal CFKBase is distributed in the hope that it will be useful,
 *	but WITHOUT ANY WARRANTY; without even the implied warranty of
 *	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *	GNU General Public License for more details.
 *
 *	You should have received a copy of the GNU General Public License
 *	along with Mark's Code Fractal CFKBase.  If not, see &lt;https://www.gnu.org/licenses/&gt;.
 *
 *	If you wish to modify and use this code without publishing your changes,
 *	or integrate it with proprietary code, please contact Mark Stephen Sobkow
 *	for a commercial license at mark.sobkow@gmail.com
 * -->
<RuleSet
	xmlns="http://msscf.org:8088/msscf/2.0.13/xsd/cfgenkb-2.13-ruleset.xsd"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:xs="http://www.w3.org/2001/XMLSchema"
	xsi:schemaLocation="http://msscf.org:8088/msscf/2.0.13/xsd/cfgenkb-2.13-ruleset.xsd http://msscf.org:8088/msscf/2.0.13/xsd/cfgenkb-2.13-ruleset.xsd"
	ToolSet="java"
	Name="src/schemaobj/buff/SchemaTableBuffEditObj.java"
	Revision="3.0"
	Descr="Java buffer-focused edit object instance implementation">

	<GenFile GenDef="Table" Name="fileBuffEditObjJava"
			GenerateOnce="false"
		ModuleName="$reference ManufacturingSchema lower JavaPackage$"
		SourceBundle="java"
		BasePackageName="$reference ManufacturingSchema lower JavaPackage$.$reference ManufacturingSchema lower SchemaName$/src/main/java"
		SubPackageName="$reference ManufacturingSchema lower JavaPackage$.$reference ManufacturingSchema lower SchemaName$obj.buff"
		ExpansionClassName="$SchemaName$Buff$TableName$EditObjJava"
		ExpansionKeyName="$SchemaName$Buff$TableName$EditObjJava"
		ExpansionFileName="$SchemaName$Buff$TableName$EditObj.java"
>// Description: Java buffer-focused edit object instance implementation for $SchemaName$ $TableName$.

$MssSourceLicense$

package $lower DefTopProjectName$.$DefVUnderVersion$.$lower DefSubProjectName$.$lower DefSchemaName$obj.buff;

import java.math.*;
import java.sql.*;
import java.text.*;
import java.util.*;
import server.markhome.mcf.v3_1.cflib.*;
import server.markhome.mcf.v3_1.cflib.dbutil.*;
import org.apache.commons.text.StringEscapeUtils;$poptop SchemaDef iterate SchemaRefs( each importJavaPackageSchemaName empty empty )$
import $lower DefTopProjectName$.$DefVUnderVersion$.$lower DefSubProjectName$.$lower DefSchemaName$.*;$poptop SchemaDef iterate SchemaRefs( each importJavaPackageSchemaNameObj empty empty )$
import $lower DefTopProjectName$.$DefVUnderVersion$.$lower DefSubProjectName$.$lower DefSchemaName$obj.*;$importJavaPackageSchemaName$$JavaEditObjImport$

public class $SchemaName$$TableName$EditObj$switch HasSuperClassRelation yes implBuffEditObjInheritSuperClass default empty$
	implements I$SchemaName$$TableName$EditObj
{$switch HasSuperClassRelation no declBuffEditObjAttrOrig default empty$$switch HasSuperClassRelation no implBuffEditObjTableBuffAttr default empty$$switch HasSuperClassRelation no declObjAttrOptAuditColumns default empty$$iterate Relation( each implBuffEditObjRelationAttr empty empty )$$JavaEditObjMembers$

	public $SchemaName$$TableName$EditObj( I$DefSchemaName$$TableName$Obj argOrig ) {$switch HasSuperClassRelation yes implBuffEditObjConstructorInvokeSuperOrig default empty$$switch HasSuperClassRelation no implBuffEditObjConstructorInitOrigAndCopy default empty$$iterate Relation( each implBuffEditObjConstructorInitRelationAttr empty empty )$
	}
$switch HasSuperClassRelation no implBuffEditObjOptSetAuditColumns default empty$$implBuffEditObjMethods$$JavaEditObjImplementation$}
</GenFile>

	<GenRule GenDef="Table" Name="implBuffEditObjOptSetAuditColumns"
		>$switch HasAuditColumns yes implBuffEditObjSetAuditColumns default empty$</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjSetAuditColumns">$implObjGetAuditColumns$
	public void setCreatedBy( I$SecSchemaName$SecUserObj value ) {
		createdBy = value;
		if( value != null ) {
			getBuff().setCreatedByUserId( value.getRequiredSecUserId() );
		}
	}

	public void setCreatedAt( Calendar value ) {
		getBuff().setCreatedAt( value );
	}

	public void setUpdatedBy( I$SecSchemaName$SecUserObj value ) {
		updatedBy = value;
		if( value != null ) {
			getBuff().setUpdatedByUserId( value.getRequiredSecUserId() );
		}
	}

	public void setUpdatedAt( Calendar value ) {
		getBuff().setUpdatedAt( value );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjMethods"
		>$implBuffEditObjGetClassCode$$implGetGenDefName$$maybeBuffImplGetScope$$implGetObjName$$maybeBuffImplGetObjQualifier$$maybeBuffImplGetQualNamedObject$$implGetNamedObject$$maybeBuffImplGetObjQualifiedName$$maybeBuffImplGetObjFullName$$implBuffEditObjRealise$$implBuffEditObjForget$$switch HasSuperClassRelation no implBuffEditObjRead default empty$$switch HasChain yes implBuffEditObjMoveUp default empty$$switch HasChain yes implBuffEditObjMoveDown default empty$$implBuffEditObjCreate$$implBuffEditObjUpdate$$implBuffEditObjDelete$$implBuffEditObjTableAccessors$$switch HasSuperClassRelation no implBuffEditObjEditAccessors default empty$$implBuffEditObjEditAsAccessors$$switch HasSuperClassRelation no implBuffEditObjBeginEdit default empty$$switch HasSuperClassRelation no implBuffEditObjEndEdit default empty$$switch HasSuperClassRelation no implBuffEditObjOrigAccessors default empty$$implBuffEditObjOrigAsCast$$switch HasSuperClassRelation no implBuffEditObjSchemaAccessors default empty$$implBuffEditObjBuffAccessors$$implBuffEditObjTableBuffAccessors$$switch HasSuperClassRelation no implBuffEditObjPKeyAccessors default empty$$switch HasSuperClassRelation no implBuffEditObjIsNewAccessors default empty$$implBuffEditObjColumnAccessors$$maybeBuffImplEditObjNarrowedContainerAccessors$$iterate Relation( each implBuffEditObjRelationAccessors empty empty )$$switch HasSuperClassRelation no implBuffEditObjCopyPKeyToBuff default empty$$switch HasSuperClassRelation no implBuffEditObjCopyBuffToPKey default empty$$implBuffEditObjCopyBuffToOrig$$implBuffEditObjCopyOrigToBuff$$iterate ServerMethods( each implJavaObjServerMethod empty empty )$</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjMoveUp">
	public I$reference BaseClass DefSchemaName$$reference Chain reference Table TableName$Obj moveUp() {
		throw new CFLibUsageException( getClass(),
			"moveUp",
			"You cannot move an edited object in the chain" );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjMoveDown">
	public I$reference BaseClass DefSchemaName$$reference Chain reference Table TableName$Obj moveDown() {
		throw new CFLibUsageException( getClass(),
			"moveDown",
			"You cannot move an edited object in the chain" );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjColumnAccessors"
		>$switch HasSuperClassRelation yes implBuffEditObjInhColumnAccessors default implBuffEditObjBaseColumnAccessors$</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjInhColumnAccessors"
		>$iterate Columns( each implBuffEditObjColumnAccessors empty empty )$</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjBaseColumnAccessors"
		>$iterate Columns( each implBuffEditObjBaseColumnAccessors empty empty )$</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjGetClassCode">
	public String getClassCode() {
		return( $SchemaName$$TableName$Obj.CLASS_CODE );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjBeginEdit">
	public I$DefSchemaName$$TableName$EditObj beginEdit() {
		throw new CFLibUsageException( getClass(), "beginEdit", "Cannot edit an edition" );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjEndEdit">
	public void endEdit() {
		orig.endEdit();
	}
</GenRule>


	<GenRule GenDef="Table" Name="implBuffEditObjEditAccessors">
	public I$DefSchemaName$$TableName$EditObj getEdit() {
		return( (I$DefSchemaName$$TableName$EditObj)this );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjEditAsAccessors">
	public I$DefSchemaName$$TableName$EditObj getEditAs$TableName$() {
		return( (I$DefSchemaName$$TableName$EditObj)this );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjConstructorInitAndCopyBuff">
		buff = getBuff();
		$DefSchemaName$$TableName$Buff origBuff = argOrig.get$TableName$Buff();
		buff.set( origBuff );</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjConstructorInitBuff">$switch HasSuperClassRelation yes implBuffEditObjConstructorInitAndCopyBuff default empty$
		$DefSchemaName$$TableName$Buff origBuff = argOrig.get$TableName$Buff();$iterate Columns( each implBuffEditObjConstructorCopyAttrFromArgOrig )$
		buff.setRequiredRevision( origBuff.getRequiredRevision() );</GenRule>

	<GenRule GenDef="Atom" Name="implBuffEditObjConstructorCopyAttrFromArgOrig">
		buff.set$OptionalOrRequired$$Name$( origBuff.get$OptionalOrRequired$$Name$() );</GenRule>
	<GenRule GenDef="TableCol" Name="implBuffEditObjConstructorCopyAttrFromArgOrig">
		buff.set$OptionalOrRequired$$Name$( origBuff.get$OptionalOrRequired$$Name$() );</GenRule>

	<GenRule GenDef="Table" Name="declBuffEditObjAttrOrig">
	protected I$DefSchemaName$$TableName$Obj orig;</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjConstructorInitOrigAndCopy">
		orig = argOrig;
		getBuff();
		$DefSchemaName$$TableName$Buff origBuff = orig.getBuff();
		buff.set( origBuff );</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjOrigAccessors">
	public I$DefSchemaName$$TableName$Obj getOrig() {
		return( orig );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjOrigAsCast">
	public I$DefSchemaName$$TableName$Obj getOrigAs$TableName$() {
		return( (I$DefSchemaName$$TableName$Obj)orig );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjIsNewAccessors">
	public boolean getIsNew() {
		return( orig.getIsNew() );
	}

	public void setIsNew( boolean value ) {
		orig.setIsNew( value );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjSchemaAccessors">
	public I$DefSchemaName$SchemaObj getSchema() {
		return( orig.getSchema() );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjTableAccessors">
	public I$DefSchemaName$$TableName$TableObj get$TableName$Table() {
		return( orig.getSchema().get$TableName$TableObj() );
	}
</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjConstructorInitRelationAttr"
		>$switch RelationTypeTag
			Lookup implBuffEditObjConstructorInitRelationSingletonAttr
			Superclass empty
			Master implBuffEditObjConstructorInitRelationSingletonAttr
			Details empty
			Container implBuffEditObjConstructorInitRelationSingletonAttr
			Owner implBuffEditObjConstructorInitRelationSingletonAttr
			Components empty
			Parent implBuffEditObjConstructorInitRelationSingletonAttr
			Children empty
			default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjConstructorInitRelationSingletonAttr">
		$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationAttr"
		>$switch RelationToIndexIsUnique yes maybeBuffImplEditObjRelationSingletonAttr default empty$</GenRule>

	<GenRule GenDef="Relation" Name="maybeBuffImplEditObjRelationSingletonAttr"
		>$switch RelationTypeTag Superclass empty default implBuffEditObjRelationSingletonAttr$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSingletonAttr">
	protected I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj $leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$;</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationAccessors"
		>$switch RelationToIndexIsUnique yes maybeBuffImplEditObjRelationSingletonAccessors default maybeBuffImplEditObjRelationCollectionAccessors$</GenRule>

	<GenRule GenDef="Relation" Name="maybeBuffImplEditObjRelationSingletonAccessors"
		>$switch RelationTypeTag Superclass empty default implBuffEditObjRelationSingletonAccessors$</GenRule>

	<GenRule GenDef="Relation" Name="maybeBuffImplEditObjRelationCollectionAccessors"
		>$switch RelationTypeTag Superclass empty default implBuffEditObjRelationCollectionAccessors$</GenRule>

	<GenRule GenDef="Object" Name="implBuffEditObjRelationJavaOptional">?</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjNarrowedSingleContainerAccessors"
		>$iterate ContainerRelations( lone implBuffEditObjNarrowedSingleCAccessors each empty empty empty )$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjNarrowedSingleCAccessors"
		>$switch HasNarrowed yes implBuffEditObjReallyNarrowedSingleCAccessors default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjReallyNarrowedSingleCAccessors"
		>$reference Narrowed implBuffEditObjNarrowedActualSingleCAccessors$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjNarrowedActualSingleCAccessors">
	public void set$OptionalOrRequired$$RelationTypeTag$$Suffix$( I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj value ) {
		final String S_ProcName = "$SchemaName$$poptop Relation reference FromTable TableName$EditObj.set$OptionalOrRequired$$RelationTypeTag$$Suffix$() ";
		if( value == null ) {$poptop Relation implBuffEditObjInvokeNarrowestSingletonNullAccessor$
		}
		else if( ! ( value instanceof I$poptop Relation reference ToTable DefSchemaName$$poptop Relation reference ToTable TableName$Obj ) ) {
			throw new CFLibUnsupportedClassException( getClass(),
				"set$OptionalOrRequired$$RelationTypeTag$$Suffix$",
				"value",
				value,
				"I$poptop Relation reference ToTable DefSchemaName$$poptop Relation reference ToTable TableName$Obj" );
		}
		else {$poptop Relation implBuffEditObjInvokeNarrowestSingletonAccessor$
		}
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjNarrowedMultipleContainerAccessors"
		>$iterate ContainerRelations( first implBuffEditObjNarrowedMultipleCAccessors each empty empty empty )$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjNarrowedMultipleCAccessors"
		>$switch HasNarrowed yes implBuffEditObjReallyNarrowedMultipleCAccessors default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjReallyNarrowedMultipleCAccessors"
		>$reference Narrowed implBuffEditObjNarrowedActualMultipleCAccessors$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjNarrowedActualMultipleCAccessors">
	public void set$OptionalOrRequired$$RelationTypeTag$$Suffix$( I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj value ) {
		final String S_ProcName = "$SchemaName$$poptop Relation reference FromTable TableName$EditObj.set$OptionalOrRequired$$RelationTypeTag$$Suffix$() ";
		if( value == null ) {$poptop Table implBuffEditObjClearMultipleNullMembers$
			super.set$OptionalOrRequired$$RelationTypeTag$$Suffix$( null );
		}$poptop Table implBuffEditObjInvokeMultipleByClass$
		else {
			throw new CFLibUnsupportedClassException( getClass(),
				"set$OptionalOrRequired$$RelationTypeTag$$Suffix$",
				"value",
				value,
				"derived from I$poptop Relation reference ToTable DefSchemaName$$poptop Relation reference ToTable TableName$Obj" );
		}
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjInvokeMultipleByClass"
		>$iterate ContainerRelations( each implBuffEditObjInvokeMultipleByClass )$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjInvokeMultipleByClass">
		else if( value instanceof I$DefSchemaName$$reference ToTable TableName$Obj ) {$poptop Table implBuffEditObjClearMultipleNullMembers$
			set$OptionalOrRequired$$RelationTypeTag$$Suffix$( (I$DefSchemaName$$reference ToTable TableName$Obj)value );
		}</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjClearMultipleNullMembers"
		>$iterate ContainerRelations( each implBuffEditObjClearRelationMember empty empty )$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjClearRelationMember">
			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;$iterate Columns( each implBuffEditObjClearRelationMemberSetBuffOptionalAttrNull )$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjClearRelationMemberSetBuffOptionalAttrNull"
		>$switch FromColDefIsNullable yes implBuffEditObjClearRelationMemberSetBuffAttrNull default empty$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjClearRelationMemberSetBuffAttrNull">
			get$reference Relation reference FromTable TableName$Buff().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( null );</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjInvokeNarrowestSingletonAccessor">
			set$OptionalOrRequired$$RelationTypeTag$$Suffix$( (I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj)value );</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjInvokeNarrowestSingletonNullAccessor">
			set$OptionalOrRequired$$RelationTypeTag$$Suffix$( null );</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjInvokeNarrowedSetter">
		set$reference Narrowed OptionalOrRequired$$reference Narrowed RelationTypeTag$$reference Narrowed Suffix$( value );</GenRule>

	<GenRule GenDef="Table" Name="maybeBuffImplEditObjNarrowedContainerAccessors"
		>$switch ContainerStyle
			Single maybeBuffImplEditObjNarrowedSingleContainerAccessors
			Multiple maybeBuffImplEditObjNarrowedMultipleContainerAccessors
			default empty$</GenRule>

	<GenRule GenDef="Table" Name="maybeBuffImplEditObjNarrowedSingleContainerAccessors"
		>$switch DoesContainerRelationNarrow yes implBuffEditObjNarrowedSingleContainerAccessors default empty$</GenRule>

	<GenRule GenDef="Table" Name="maybeBuffImplEditObjNarrowedMultipleContainerAccessors"
		>$switch DoesContainerRelationNarrow yes implBuffEditObjNarrowedMultipleContainerAccessors default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSingletonGetClearNull"
		>$switch RelationTypeTag Container implBuffEditObjRelationSingletonGetClearContainer Owner implBuffEditObjRelationSingletonGetClearContainer default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSingletonGetClearContainer">
				$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;$iterate Columns( each implBuffEditObjRelationSingletonClearContainerAttr )$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationSingletonClearContainerAttr"
		>$switch FromColDefIsNullable yes implBuffEditObjClearRelationSingletonContainerAttr default empty$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjClearRelationSingletonContainerAttr">
				get$reference Relation reference FromTable TableName$Buff().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( null );</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationSingletonAccessorsGetRestoreBuffAttr">
					get$reference Relation reference FromTable TableName$Buff().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( obj.get$reference ToCol switch IsNullable yes implOptional default implRequired$$reference ToCol Name$() );</GenRule>


	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSetSingletonClearNull"
		>$switch RelationTypeTag Container implBuffEditObjRelationSetSingletonClearContainer Owner implBuffEditObjRelationSetSingletonClearContainer default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSetSingletonClearContainer">
			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;$iterate Columns( each implBuffEditObjRelationSetSingletonClearContainerAttr )$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationSetSingletonClearContainerAttr"
		>$switch FromColDefIsNullable yes implBuffEditObjClearRelationSetSingletonContainerAttr default empty$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjClearRelationSetSingletonContainerAttr">
			get$reference Relation reference FromTable TableName$Buff().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( null );</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSinglettonGetClearAllContainers"
		>$poptop Table iterate Relation( each implBuffEditObjRelationSingletonGetClearNull )$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSingletonGetRestoreObj">
				if( obj != null ) {$iterate Columns( each implBuffEditObjRelationSingletonAccessorsGetRestoreBuffAttr )$
					$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = obj;
				}</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSingletonAccessors">
	public I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj get$OptionalOrRequired$$RelationTypeTag$$Suffix$() {
		return( get$OptionalOrRequired$$RelationTypeTag$$Suffix$( false ) );
	}

	public I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj get$OptionalOrRequired$$RelationTypeTag$$Suffix$( boolean forceRead ) {
		if( forceRead || ( $leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ == null ) ) {
			boolean anyMissing = false;
$iterate Columns( each implBuffEditObjRelationAccessorCheckIfColumnProvided empty empty )
$			if( ! anyMissing ) {
				I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj obj = ((I$SchemaName$SchemaObj)getOrigAs$TableName$().getSchema()).get$reference ToTable TableName$TableObj().read$reference ToTable TableName$By$reference ToIndex Suffix$( $iterate Columns( first implBuffEditObjRelationAccessorsPassArg each implBuffEditObjRelationAccessorsCommaPassArg empty empty )$ );
				$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = obj;$switch RelationTypeTag Container implBuffEditObjRelationSingletonGetRestoreObj default empty$
			}
		}
		return( $leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ );
	}

	public void set$OptionalOrRequired$$RelationTypeTag$$Suffix$( I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj value ) {
			if( buff == null ) {
				get$reference FromTable TableName$Buff();
			}
			if( value != null ) {
$iterate Columns( each implBuffEditObjRelationSingletonAccessorsSetBuffAttr )
$			}$switch RelationTypeTag Container empty Owner empty default implBuffEditObjRelationSetSingletonElseClearNull$
			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = value;$switch HasNarrowed yes implBuffEditObjRelationSetSingletonInvokeSuperNarrowed default empty$
	}
</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSetSingletonElseClearNull">
			else {
$iterate Columns( each implBuffEditObjRelationSingletonAccessorsSetBuffOptionalAttrNull )
$			}</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSetSingletonClearAllContainers"
		>$poptop Table iterate Relation( each implBuffEditObjRelationSetSingletonClearNull )$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationSetSingletonInvokeSuperNarrowed">
			super.set$reference Narrowed OptionalOrRequired$$reference Narrowed RelationTypeTag$$reference Narrowed Suffix$( value );</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationSingletonAccessorsSetBuffAttr"
		>$switch FromColInPrimaryIndex yes implBuffEditObjRelationSingletonAccessorsSetBuffAndPKeyAttr default implBuffEditObjRelationSingletonAccessorsSetBuffOnlyAttr$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationSingletonAccessorsSetBuffAndPKeyAttr"
>				getPKey().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( value.get$reference ToCol switch IsNullable yes implOptional default implRequired$$reference ToCol Name$() );
				get$reference Relation reference FromTable TableName$Buff().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( value.get$reference ToCol switch IsNullable yes implOptional default implRequired$$reference ToCol Name$() );
</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationSingletonAccessorsSetBuffOnlyAttr"
>				get$reference Relation reference FromTable TableName$Buff().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( value.get$reference ToCol switch IsNullable yes implOptional default implRequired$$reference ToCol Name$() );
</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationSingletonAccessorsSetBuffOptionalAttrNull"
		>$switch FromColDefIsNullable yes implBuffEditObjRelationSingletonAccessorsSetBuffAttrNull default empty$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationSingletonAccessorsSetBuffAttrNull"
>				get$reference Relation reference FromTable TableName$Buff().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( null );
</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationAccessorsPassArg"
		>$reference FromCol switch ColumnInPrimaryIndex yes implBuffEditObjRelationAccessorsPKey default implBuffEditObjRelationAccessorsBuff$.get$reference FromCol OptionalOrRequired$$reference FromCol Name$()</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationAccessorsToColIsNullable"
		>$reference ToCol IsNullable$</GenRule>
	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationAccessorsFromColIsNullable"
		>$reference FromCol IsNullable$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationAccessorsCommaPassArg">,
					$implBuffEditObjRelationAccessorsPassArg$</GenRule>

	<GenRule GenDef="Object" Name="implBuffEditObjRelationAccessorsPKey">getPKey()</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationAccessorsBuff">get$reference Relation reference FromTable TableName$Buff()</GenRule>

	<GenRule GenDef="Object" Name="implBuffEditObjRelationAccessorsBuff">get$popto Table TableName$Buff()</GenRule>

	<GenRule GenDef="Object" Name="implBuffEditObjRelationAccessorInitDataAttr"
		>$switch ColumnInPrimaryIndex yes empty default implBuffEditObjRelationAccessorInitDataAttrValue$</GenRule>
	<GenRule GenDef="Object" Name="implBuffEditObjRelationAccessorInitDataAttrValue"
>				data.set$switch IsNullable yes implOptional default implRequired$$Name$( rec.get$switch IsNullable yes implOptional default implRequired$$Name$() );
</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationAccessorCheckIfColumnProvided"
		>$switch implBuffEditObjRelationAccessorsToColIsNullable yes empty default implBuffEditObjRelationAccessorCheckIfReqColProvided$</GenRule>

	<GenRule GenDef="RelationCol" Name="implBuffEditObjRelationAccessorCheckIfReqColProvided"
		>$switch IsNullable yes implBuffEditObjRelationAccessorCheckIfNullableNull default empty$</GenRule>

	<GenRule GenDef="Object" Name="implBuffEditObjRelationAccessorCheckIfNullableNull"
>			if( get$TableName$Buff().get$switch IsNullable yes implOptional default implRequired$$Name$() == null ) {
				anyMissing = true;
			}
</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjRelationCollectionAccessors">
	public List&lt;I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj&gt; get$OptionalOrRequired$$RelationTypeTag$$Suffix$() {
		List&lt;I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj&gt; retval;
		retval = ((I$SchemaName$SchemaObj)getOrigAs$TableName$().getSchema()).get$reference ToTable TableName$TableObj().read$reference ToTable TableName$By$reference ToIndex Suffix$( $iterate Columns( first implObjRelationAccessorsPassArg each implObjRelationAccessorsCommaPassArg empty empty )$,
			false );
		return( retval );
	}

	public List&lt;I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj&gt; get$OptionalOrRequired$$RelationTypeTag$$Suffix$( boolean forceRead ) {
		List&lt;I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj&gt; retval;
		retval = ((I$SchemaName$SchemaObj)getOrigAs$TableName$().getSchema()).get$reference ToTable TableName$TableObj().read$reference ToTable TableName$By$reference ToIndex Suffix$( $iterate Columns( first implObjRelationAccessorsPassArg each implObjRelationAccessorsCommaPassArg empty empty )$,
			forceRead );
		return( retval );
	}
</GenRule>

	<GenRule GenDef="TableCol" Name="implBuffEditObjBaseColumnAccessors"
		>$switch ColumnInPrimaryIndex yes implBuffEditObjColumnBaseROPKeyAccessor default implBuffEditObjColumnDataAccessor$</GenRule>
	<GenRule GenDef="Atom" Name="implBuffEditObjBaseColumnAccessors"
		>$switch ColumnInPrimaryIndex yes implBuffEditObjColumnBaseROPKeyAccessor default implBuffEditObjColumnDataAccessor$</GenRule>

	<GenRule GenDef="TableCol" Name="implBuffEditObjColumnAccessors"
		>$switch ColumnInPrimaryIndex yes empty default implBuffEditObjColumnDataAccessor$</GenRule>
	<GenRule GenDef="Atom" Name="implBuffEditObjColumnAccessors"
		>$switch ColumnInPrimaryIndex yes empty default implBuffEditObjColumnDataAccessor$</GenRule>

	<GenRule GenDef="TableCol" Name="implBuffEditObjColumnDataAccessor"
		>$switch ColumnInAnyRelation yes implBuffEditObjColumnRODataAccessor default implBuffEditObjColumnRWDataAccessor$</GenRule>
	<GenRule GenDef="Atom" Name="implBuffEditObjColumnDataAccessor"
		>$switch ColumnInAnyRelation yes implBuffEditObjColumnRODataAccessor default implBuffEditObjColumnRWDataAccessor$</GenRule>

	<GenRule GenDef="TableCol" Name="implBuffEditObjColumnBaseROPKeyAccessor"
		>$switch ColumnInAnyRelation yes implBuffEditObjColumnROPKeyAccessor default implBuffEditObjColumnMaybeRWPKeyAccessor$</GenRule>
	<GenRule GenDef="Atom" Name="implBuffEditObjColumnBaseROPKeyAccessor"
		>$switch ColumnInAnyRelation yes implBuffEditObjColumnROPKeyAccessor default implBuffEditObjColumnMaybeRWPKeyAccessor$</GenRule>

	<GenRule GenDef="TableCol" Name="implBuffEditObjColumnMaybeRWPKeyAccessor"
		>$switch GenerateId yes implBuffEditObjColumnROPKeyAccessor default implBuffEditObjColumnRWPKeyAccessor$</GenRule>
	<GenRule GenDef="Atom" Name="implBuffEditObjColumnMaybeRWPKeyAccessor"
		>$switch GenerateId yes implBuffEditObjColumnROPKeyAccessor default implBuffEditObjColumnRWPKeyAccessor$</GenRule>

	<GenRule GenDef="TableCol" Name="implBuffEditObjColumnROAccessor"
		>$switch ColumnInPrimaryIndex yes implBuffEditObjColumnROPKeyAccessor default implBuffEditObjColumnRODataAccessor$</GenRule>
	<GenRule GenDef="Atom" Name="implBuffEditObjColumnROAccessor"
		>$switch ColumnInPrimaryIndex yes implBuffEditObjColumnROPKeyAccessor default implBuffEditObjColumnRODataAccessor$</GenRule>

	<GenRule GenDef="TableCol" Name="implBuffEditObjColumnROPKeyAccessor">
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( getPKey().get$implColumnAttrOptionality$$Name$() );
	}
</GenRule>

	<GenRule GenDef="Atom" Name="implBuffEditObjColumnROPKeyAccessor">
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( getPKey().get$implColumnAttrOptionality$$Name$() );
	}
</GenRule>

	<GenRule GenDef="TableCol" Name="implBuffEditObjColumnRWPKeyAccessor">
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( getPKey().get$implColumnAttrOptionality$$Name$() );
	}

	public void set$implColumnAttrOptionality$$Name$( $implJavaAtomType$ value ) {
		if( getPKey().get$implColumnAttrOptionality$$Name$() != value ) {
			getPKey().set$implColumnAttrOptionality$$Name$( value );
		}
		if( get$TableName$Buff().get$implColumnAttrOptionality$$Name$() != value ) {
			get$TableName$Buff().set$implColumnAttrOptionality$$Name$( value );
		}
	}
</GenRule>

	<GenRule GenDef="Atom" Name="implBuffEditObjColumnRWPKeyAccessor">
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( getPKey().get$implColumnAttrOptionality$$Name$() );
	}

	public void set$implColumnAttrOptionality$$Name$( $implJavaAtomType$ value ) {
		if( getPKey().get$implColumnAttrOptionality$$Name$() != value ) {
			getPKey().set$implColumnAttrOptionality$$Name$( value );
		}
		if( get$TableName$Buff().get$implColumnAttrOptionality$$Name$() != value ) {
			get$TableName$Buff().set$implColumnAttrOptionality$$Name$( value );
		}
	}
</GenRule>

	<GenRule GenDef="Object" Name="implBuffEditObjColumnRODataAccessor">
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( get$TableName$Buff().get$implColumnAttrOptionality$$Name$() );
	}
</GenRule>

	<GenRule GenDef="Object" Name="implBuffEditObjColumnRWDataAccessor">
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( get$TableName$Buff().get$implColumnAttrOptionality$$Name$() );
	}

	public void set$implColumnAttrOptionality$$Name$( $implJavaAtomType$ value ) {
		if( get$TableName$Buff().get$implColumnAttrOptionality$$Name$() != value ) {
			get$TableName$Buff().set$implColumnAttrOptionality$$Name$( value );
$switch ColumnInAnyRelation yes implBuffEditObjColumnRWDataAccessorClearRelations default empty
$		}
	}
</GenRule>

	<GenRule GenDef="Object" Name="implBuffEditObjColumnRWDataAccessorClearRelations"
		>$popto Table iterate Relation( each implBuffEditObjColumnRWDataAccessorClearRelation empty empty )$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjColumnRWDataAccessorClearRelation"
		>$switch RelationTypeTag
			Superclass empty
			default implBuffEditObjColumnRWDataAccessorReallyClearRelation$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjColumnRWDataAccessorReallyClearRelation"
>			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjInheritSuperClass"
>
	extends $reference SuperClassRelation reference ToTable SchemaName$$reference SuperClassRelation reference ToTable TableName$EditObj
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjConstructorInvokeSuperOrig">
		super( argOrig );</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjTableBuffAttr">
	protected $DefSchemaName$$TableName$Buff buff;</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjPKeyAccessors">
	public $reference BaseClass DefSchemaName$$reference BaseClass TableName$PKey getPKey() {
		return( orig.getPKey() );
	}

	public void setPKey( $reference BaseClass DefSchemaName$$reference BaseClass TableName$PKey value ) {
		orig.setPKey( value );
		copyPKeyToBuff();
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjRealise">
	public I$reference BaseClass DefSchemaName$$reference BaseClass TableName$Obj realise() {
		// We realise this so that it's buffer will get copied to orig during realization
		I$DefSchemaName$$TableName$Obj retobj = getSchema().get$TableName$TableObj().realise$TableName$( (I$SchemaName$$TableName$Obj)this );
		return( retobj );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjForget">
	public void forget() {
		getOrigAs$TableName$().forget();
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjRead">
	public I$DefSchemaName$$TableName$Obj read() {
		I$DefSchemaName$$TableName$Obj retval = getOrigAs$TableName$().read();
		if( retval != orig ) {
			throw new CFLibUsageException( getClass(),
				"read",
				"retval != orig" );
		}
		copyOrigToBuff();
		return( retval );
	}

	public I$DefSchemaName$$TableName$Obj read( boolean forceRead ) {
		I$DefSchemaName$$TableName$Obj retval = getOrigAs$TableName$().read( forceRead );
		if( retval != orig ) {
			throw new CFLibUsageException( getClass(),
				"read",
				"retval != orig" );
		}
		copyOrigToBuff();
		return( retval );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjCreateCopyPKey">
		copyPKeyToBuff();</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjCreateCopyOrigPKey">
		orig.copyBuffToPKey();</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjCreate">
	public I$reference BaseClass DefSchemaName$$reference BaseClass TableName$Obj create() {$switch PrimaryKeyIsConstEnum yes implBuffEditObjCreateCopyPKey default empty $
		copyBuffToOrig();$switch PrimaryKeyIsConstEnum yes implBuffEditObjCreateCopyOrigPKey default empty$
		I$DefSchemaName$$TableName$Obj retobj = ((I$SchemaName$SchemaObj)getOrigAs$TableName$().getSchema()).get$TableName$TableObj().create$TableName$( getOrigAs$TableName$() );
		if( retobj == getOrigAs$TableName$() ) {
			copyOrigToBuff();
		}
		return( retobj );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjCopyBuffToOrig">
	public void copyBuffToOrig() {
		$DefSchemaName$$TableName$Buff origBuff = getOrigAs$TableName$().get$TableName$Buff();
		$DefSchemaName$$TableName$Buff myBuff = get$TableName$Buff();
		origBuff.set( myBuff );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjCopyOrigToBuff">
	public void copyOrigToBuff() {
		$DefSchemaName$$TableName$Buff origBuff = getOrigAs$TableName$().get$TableName$Buff();
		$DefSchemaName$$TableName$Buff myBuff = get$TableName$Buff();
		myBuff.set( origBuff );
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implBuffEditObjReadPassPKeyArg"
		>getPKey().get$OptionalOrRequired$$Name$()</GenRule>
	<GenRule GenDef="IndexCol" Name="implBuffEditObjReadCommaPassPKeyArg">,
			$implBuffEditObjReadPassPKeyArg$</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjUpdate">
	public $reference BaseClass DefSchemaName$$reference BaseClass TableName$EditObj update() {
		getSchema().get$TableName$TableObj().update$TableName$( (I$DefSchemaName$$TableName$Obj)this );
		return( null );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjDelete">
	public $reference BaseClass DefSchemaName$$reference BaseClass TableName$EditObj deleteInstance() {$implBuffEditObjDeleteCheckNotNew$
		getSchema().get$TableName$TableObj().delete$TableName$( getOrigAs$TableName$() );
		return( null );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjDeleteCheckNotNew">
		if( getIsNew() ) {
			throw new CFLibUsageException( getClass(), "delete", "Cannot delete a new instance" );
		}</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjCopyPKeyToBuff">
	public void copyPKeyToBuff() {$reference BaseClass reference PrimaryKeyIndex iterate Columns( each implBuffEditObjCopyPKeyAttrToBuff empty empty )$
	}
</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjCopyBuffClassCodeToPKey">
		getPKey().setClassCode( buff.getClassCode() );</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjCopyBuffToPKey">
	public void copyBuffToPKey() {$switch HasClassCode yes implBuffEditObjCopyBuffClassCodeToPKey default empty$$reference PrimaryKeyIndex iterate Columns( each implObjCopyBuffAttrToPKey empty empty )$
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implBuffEditObjCopyBuffAttrToPKey">
		getPKey().set$implColumnAttrOptionality$$Name$( buff.get$implColumnAttrOptionality$$Name$() );</GenRule>

	<GenRule GenDef="IndexCol" Name="implBuffEditObjCopyPKeyAttrToBuff">
		buff.set$implColumnAttrOptionality$$Name$( getPKey().get$implColumnAttrOptionality$$Name$() );</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjBuffAccessors">
	public $DefSchemaName$$reference BaseClass TableName$Buff getBuff() {
		if( buff == null ) {
			buff = ((I$SchemaName$Schema)getOrigAs$TableName$().getSchema().getBackingStore()).getFactory$TableName$().newBuff();
			buff.set( orig.getBuff() );
		}
		return( buff );
	}

	public void setBuff( $DefSchemaName$$reference BaseClass TableName$Buff value ) {
		if( buff != value ) {$switch HasSuperClassRelation yes invokeBuffEditObjSuperSetBuff default invokeBuffEditObjBaseSetBuff$
$iterate Relation( each implBuffEditObjTableDataAccessorsClearRelationMember empty empty )
$		}
	}
</GenRule>

	<GenRule GenDef="Table" Name="invokeBuffEditObjSuperSetBuff">
			super.setBuff( value );</GenRule>

	<GenRule GenDef="Table" Name="invokeBuffEditObjBaseSetBuff">
			buff = value;</GenRule>

	<GenRule GenDef="Table" Name="implBuffEditObjTableBuffAccessors">
	public $DefSchemaName$$TableName$Buff get$TableName$Buff() {
		return( ($DefSchemaName$$TableName$Buff)getBuff() );
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implBuffEditObjTableDataAccessorsCommaPassArg">,
					$switch ColumnInPrimaryIndex yes implBuffEditObjTableDataAccessorsPKey default implBuffEditObjTableDataAccessorsData$.get$OptionalOrRequired$$Name$()</GenRule>

	<GenRule GenDef="IndexCol" Name="implBuffEditObjTableDataAccessorsPKey">getPKey()</GenRule>

	<GenRule GenDef="IndexCol" Name="implBuffEditObjTableDataAccessorsBuff">$leadlower reference Table TableName$Buff</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjTableDataAccessorsClearRelationMember"
		>$switch RelationTypeTag
			Superclass empty
			Details empty
			Components empty
			Children empty
			default implBuffEditObjTableDataAccessorsReallyClearMember$</GenRule>

	<GenRule GenDef="Relation" Name="implBuffEditObjTableDataAccessorsReallyClearMember"
>			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;
</GenRule>

</RuleSet>
