<?xml version="1.0" encoding="UTF-8"?>
<!--
 *	Mark's Code Fractal CFKBase 3.1 Code Fractal Knowledge Base
 *
 *	Copyright 2016-2025 Mark Stephen Sobkow
 *
 *	This file is part of Mark's Code Fractal CFKBase.
 *
 *	Mark's Code Fractal CFKBase is available under dual commercial license from
 *	Mark Stephen Sobkow, or under the terms of the GNU General Public License,
 *	Version 3 or later.
 *
 *	Mark's Code Fractal CFKBase is free software: you can redistribute it and/or
 *	modify it under the terms of the GNU General Public License as published by
 *	the Free Software Foundation, either version 3 of the License, or
 *	(at your option) any later version.
 *
 *	Mark's Code Fractal CFKBase is distributed in the hope that it will be useful,
 *	but WITHOUT ANY WARRANTY; without even the implied warranty of
 *	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *	GNU General Public License for more details.
 *
 *	You should have received a copy of the GNU General Public License
 *	along with Mark's Code Fractal CFKBase.  If not, see &lt;https://www.gnu.org/licenses/&gt;.
 *
 *	If you wish to modify and use this code without publishing your changes,
 *	or integrate it with proprietary code, please contact Mark Stephen Sobkow
 *	for a commercial license at mark.sobkow@gmail.com
 * -->
<RuleSet
	xmlns="http://msscf.org:8088/msscf/2.0.13/xsd/cfgenkb-2.13-ruleset.xsd"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:xs="http://www.w3.org/2001/XMLSchema"
	xsi:schemaLocation="http://msscf.org:8088/msscf/2.0.13/xsd/cfgenkb-2.13-ruleset.xsd http://msscf.org:8088/msscf/2.0.13/xsd/cfgenkb-2.13-ruleset.xsd"
	ToolSet="java"
	Name="src/schemaobj/EditObj.java"
	Revision="3.0"
	Descr="Java edit object instance implementation">

	<GenFile GenDef="Table" Name="fileEditObjJava"
			GenerateOnce="false"
		ModuleName="$reference ManufacturingSchema lower JavaPackage$"
		SourceBundle="java"
		BasePackageName="$reference ManufacturingSchema lower JavaPackage$.$reference ManufacturingSchema lower SchemaName$/src/main/java"
		SubPackageName="$reference ManufacturingSchema lower JavaPackage$.$reference ManufacturingSchema lower SchemaName$obj"
		ExpansionClassName="$SchemaName$$TableName$EditObjJava"
		ExpansionKeyName="$SchemaName$$TableName$EditObjJava"
		ExpansionFileName="$SchemaName$$TableName$EditObj.java"
>// Description: Java edit object instance implementation for $SchemaName$ $TableName$.

$MssSourceLicense$

package $reference ManufacturingSchema lower JavaPackage$.$reference ManufacturingSchema lower SchemaName$obj;

import java.math.*;
import java.sql.*;
import java.text.*;
import java.time.*;
import java.util.*;
import org.apache.commons.codec.binary.Base64;
import org.apache.commons.text.StringEscapeUtils;
import server.markhome.mcf.v3_1.cflib.*;
import server.markhome.mcf.v3_1.cflib.dbutil.*;$poptop SchemaDef iterate SchemaRefs( each importJavaPackageSchemaName empty empty )$$poptop SchemaDef iterate SchemaRefs( each importJavaPackageSchemaNameObj empty empty )$$importJavaPackageSchemaName$$JavaEditObjImport$

public class $SchemaName$$TableName$EditObj$switch HasSuperClassRelation yes implEditObjInheritSuperClass default empty$
	implements I$SchemaName$$TableName$EditObj
{$switch HasSuperClassRelation no declEditObjAttrOrig default empty$$switch HasSuperClassRelation no implEditObjTableRecAttr default empty$$switch HasSuperClassRelation no declObjAttrOptAuditColumns default empty$$iterate Relation( each implObjRelationAttr empty empty )$$JavaEditObjMembers$

	public $SchemaName$$TableName$EditObj( I$DefSchemaName$$TableName$Obj argOrig ) {$switch HasSuperClassRelation yes implEditObjConstructorInvokeSuperOrig default empty$$switch HasSuperClassRelation no implEditObjConstructorInitOrigAndCopy default empty$$iterate Relation( each implEditObjConstructorInitRelationAttr empty empty )$
	}
$switch HasSuperClassRelation no implEditObjOptSetAuditColumns default empty$$implEditObjMethods$$JavaEditObjImplementation$}
</GenFile>

	<GenRule GenDef="Table" Name="implEditObjSchemaAccessors">
	@Override
	public I$DefSchemaName$SchemaObj getSchema() {
		return( orig.getSchema() );
	}

	@Override
	public void setSchema( I$DefSchemaName$SchemaObj value ) {
		orig.setSchema(value);
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjOptSetAuditColumns"
		>$switch HasAuditColumns yes implEditObjSetAuditColumns default empty$</GenRule>

	<GenRule GenDef="Table" Name="implEditObjSetAuditColumns">$implObjGetAuditColumns$
	@Override
	public void setCreatedBy( I$SecSchemaName$SecUserObj value ) {
		createdBy = value;
		if( value != null ) {
			getRec().setCreatedByUserId( value.getRequiredSecUserId() );
		}
	}

	@Override
	public void setCreatedAt( LocalDateTime value ) {
		getRec().setCreatedAt( value );
	}

	@Override
	public void setUpdatedBy( I$SecSchemaName$SecUserObj value ) {
		updatedBy = value;
		if( value != null ) {
			getRec().setUpdatedByUserId( value.getRequiredSecUserId() );
		}
	}

	@Override
	public void setUpdatedAt( LocalDateTime value ) {
		getRec().setUpdatedAt( value );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjMethods"
		>$implEditObjGetClassCode$$implGetGenDefName$$maybeImplGetScope$$implGetObjName$$maybeImplGetObjQualifier$$maybeImplGetQualNamedObject$$implGetNamedObject$$maybeImplGetObjQualifiedName$$maybeImplGetObjFullName$$implEditObjRealise$$implEditObjForget$$switch HasSuperClassRelation no implEditObjRead default empty$$switch HasChain yes implEditObjMoveUp default empty$$switch HasChain yes implEditObjMoveDown default empty$$implEditObjCreate$$implEditObjUpdate$$implEditObjDelete$$implEditObjTableAccessors$$switch HasSuperClassRelation no implEditObjEditAccessors default empty$$implEditObjEditAsAccessors$$switch HasSuperClassRelation no implEditObjBeginEdit default empty$$switch HasSuperClassRelation no implEditObjEndEdit default empty$$switch HasSuperClassRelation no implEditObjOrigAccessors default empty$$implEditObjOrigAsCast$$switch HasSuperClassRelation no implEditObjSchemaAccessors default empty$$implEditObjRecAccessors$$implEditObjTableRecAccessors$$switch HasSuperClassRelation no implEditObjPKeyAccessors default empty$$switch HasSuperClassRelation no implEditObjIsNewAccessors default empty$$reference BaseClass reference PrimaryKeyIndex iterate Columns( lone implPKeyEditObjColumnAccessorsDirect each implEditObjColumnBaseRWPKeyAccessor )$$iterate DataColumns( each implEditObjColumnDataAccessor empty empty )$$maybeImplEditObjNarrowedContainerAccessors$$iterate Relation( each implEditObjRelationAccessors empty empty )$$switch HasSuperClassRelation no implEditObjCopyPKeyToRec default empty$$switch HasSuperClassRelation no implEditObjCopyRecToPKey default empty$$implEditObjCopyRecToOrig$$implEditObjCopyOrigToRec$$iterate ServerMethods( each implJavaObjServerMethod empty empty )$</GenRule>

	<GenRule GenDef="Table" Name="implEditObjMoveUp">
	@Override
	public I$reference BaseClass DefSchemaName$$reference Chain reference Table TableName$Obj moveUp() {
		throw new CFLibCannotMoveEditedObjectException( getClass(),	"moveUp" );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjMoveDown">
	@Override
	public I$reference BaseClass DefSchemaName$$reference Chain reference Table TableName$Obj moveDown() {
		throw new CFLibCannotMoveEditedObjectException( getClass(),	"moveDown" );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjColumnAccessors"
		>$switch HasSuperClassRelation yes implEditObjInhColumnAccessors default implEditObjBaseColumnAccessors$</GenRule>

	<GenRule GenDef="Table" Name="implEditObjInhColumnAccessors"
		>$iterate Columns( each implEditObjColumnAccessors empty empty )$</GenRule>

	<GenRule GenDef="Table" Name="implEditObjBaseColumnAccessors"
		>$iterate Columns( each implEditObjBaseColumnAccessors empty empty )$</GenRule>

	<GenRule GenDef="Table" Name="implEditObjGetClassCode">
	@Override
	public int getClassCode() {
		return( ((I$DefSchemaName$SchemaObj)orig.getSchema()).get$TableName$TableObj().getClassCode() );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjBeginEdit">
	@Override
	public I$DefSchemaName$$TableName$EditObj beginEdit() {
		throw new CFLibEditAlreadyOpenException( getClass(), "beginEdit" );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjEndEdit">
	@Override
	public void endEdit() {
		orig.endEdit();
	}
</GenRule>


	<GenRule GenDef="Table" Name="implEditObjEditAccessors">
	@Override
	public I$DefSchemaName$$TableName$EditObj getEdit() {
		return( (I$DefSchemaName$$TableName$EditObj)this );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjEditAsAccessors">
	@Override
	public I$DefSchemaName$$TableName$EditObj getEditAs$TableName$() {
		return( (I$DefSchemaName$$TableName$EditObj)this );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjConstructorInitAndCopyRec">
		rec = getRec();
		I$DefSchemaName$$TableName$ origRec = argOrig.get$TableName$Rec();
		rec.set( origRec );</GenRule>

	<GenRule GenDef="Table" Name="implEditObjConstructorInitRec">$switch HasSuperClassRelation yes implEditObjConstructorInitAndCopyRec default empty$
		I$DefSchemaName$$TableName$Rec origRec = argOrig.get$TableName$Rec();$iterate Columns( each implEditObjConstructorCopyAttrFromArgOrig )$
		rec.setRequiredRevision( origRec.getRequiredRevision() );</GenRule>

	<GenRule GenDef="Atom" Name="implEditObjConstructorCopyAttrFromArgOrig">
		rec.set$OptionalOrRequired$$Name$( origRec.get$OptionalOrRequired$$Name$() );</GenRule>
	<GenRule GenDef="TableCol" Name="implEditObjConstructorCopyAttrFromArgOrig">
		rec.set$OptionalOrRequired$$Name$( origRec.get$OptionalOrRequired$$Name$() );</GenRule>

	<GenRule GenDef="Table" Name="declEditObjAttrOrig">
	protected I$DefSchemaName$$TableName$Obj orig;</GenRule>

	<GenRule GenDef="Table" Name="implEditObjConstructorInitOrigAndCopy">
		orig = argOrig;
		getRec();
		I$DefSchemaName$$TableName$ origRec = orig.getRec();
		rec.set( origRec );</GenRule>

	<GenRule GenDef="Table" Name="implEditObjOrigAccessors">
	@Override
	public I$DefSchemaName$$TableName$Obj getOrig() {
		return( orig );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjOrigAsCast">
	@Override
	public I$DefSchemaName$$TableName$Obj getOrigAs$TableName$() {
		return( (I$DefSchemaName$$TableName$Obj)orig );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjIsNewAccessors">
	@Override
	public boolean getIsNew() {
		return( orig.getIsNew() );
	}

	@Override
	public void setIsNew( boolean value ) {
		orig.setIsNew( value );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjTableAccessors">
	@Override
	public I$DefSchemaName$$TableName$TableObj get$TableName$Table() {
		return( orig.getSchema().get$TableName$TableObj() );
	}
</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjConstructorInitRelationAttr"
		>$switch RelationTypeTag
			Lookup implEditObjConstructorInitRelationSingletonAttr
			Superclass empty
			Master implEditObjConstructorInitRelationSingletonAttr
			Details empty
			Container implEditObjConstructorInitRelationSingletonAttr
			Owner implEditObjConstructorInitRelationSingletonAttr
			Components empty
			Parent implEditObjConstructorInitRelationSingletonAttr
			Children empty
			default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjConstructorInitRelationSingletonAttr">
		$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationAttr"
		>$switch RelationToIndexIsUnique yes maybeImplEditObjRelationSingletonAttr default empty$</GenRule>

	<GenRule GenDef="Relation" Name="maybeImplEditObjRelationSingletonAttr"
		>$switch RelationTypeTag Superclass empty default implEditObjRelationSingletonAttr$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSingletonAttr">
	protected I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj $leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$;</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationAccessors"
		>$switch RelationToIndexIsUnique yes maybeImplEditObjRelationSingletonAccessors default maybeImplEditObjRelationCollectionAccessors$</GenRule>

	<GenRule GenDef="Relation" Name="maybeImplEditObjRelationSingletonAccessors"
		>$switch RelationTypeTag Superclass empty default implEditObjRelationSingletonAccessors$</GenRule>

	<GenRule GenDef="Relation" Name="maybeImplEditObjRelationCollectionAccessors"
		>$switch RelationTypeTag Superclass empty default implObjRelationCollectionAccessors$</GenRule>

	<GenRule GenDef="Object" Name="implEditObjRelationJavaOptional">?</GenRule>

	<GenRule GenDef="Table" Name="implEditObjNarrowedSingleContainerAccessors"
		>$iterate ContainerRelations( lone implEditObjNarrowedSingleCAccessors each empty empty empty )$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjNarrowedSingleCAccessors"
		>$switch HasNarrowed yes implEditObjReallyNarrowedSingleCAccessors default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjReallyNarrowedSingleCAccessors"
		>$reference Narrowed implEditObjNarrowedActualSingleCAccessors$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjNarrowedActualSingleCAccessors">
	@Override
	public void set$OptionalOrRequired$$RelationTypeTag$$Suffix$( I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj value ) {
		final String S_ProcName = "$SchemaName$$poptop Relation reference FromTable TableName$EditObj.set$OptionalOrRequired$$RelationTypeTag$$Suffix$() ";
		if( value == null ) {$poptop Relation implEditObjInvokeNarrowestSingletonNullAccessor$
		}
		else if( ! ( value instanceof I$poptop Relation reference ToTable DefSchemaName$$poptop Relation reference ToTable TableName$Obj ) ) {
			throw new CFLibUnsupportedClassException( getClass(),
				"set$OptionalOrRequired$$RelationTypeTag$$Suffix$",
				"value",
				value,
				"I$poptop Relation reference ToTable DefSchemaName$$poptop Relation reference ToTable TableName$Obj" );
		}
		else {$poptop Relation implEditObjInvokeNarrowestSingletonAccessor$
		}
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjNarrowedMultipleContainerAccessors"
		>$iterate ContainerRelations( first implEditObjNarrowedMultipleCAccessors each empty empty empty )$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjNarrowedMultipleCAccessors"
		>$switch HasNarrowed yes implEditObjReallyNarrowedMultipleCAccessors default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjReallyNarrowedMultipleCAccessors"
		>$reference Narrowed implEditObjNarrowedActualMultipleCAccessors$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjNarrowedActualMultipleCAccessors">
	@Override
	public void set$OptionalOrRequired$$RelationTypeTag$$Suffix$( I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj value ) {
		final String S_ProcName = "$SchemaName$$poptop Relation reference FromTable TableName$EditObj.set$OptionalOrRequired$$RelationTypeTag$$Suffix$() ";
		if( value == null ) {$poptop Table implEditObjClearMultipleNullMembers$
			super.set$OptionalOrRequired$$RelationTypeTag$$Suffix$( null );
		}$poptop Table implEditObjInvokeMultipleByClass$
		else {
			throw new CFLibUnsupportedClassException( getClass(),
				"set$OptionalOrRequired$$RelationTypeTag$$Suffix$",
				"value",
				value,
				"derived from I$poptop Relation reference ToTable DefSchemaName$$poptop Relation reference ToTable TableName$Obj" );
		}
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjInvokeMultipleByClass"
		>$iterate ContainerRelations( each implEditObjInvokeMultipleByClass )$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjInvokeMultipleByClass">
		else if( value instanceof I$DefSchemaName$$reference ToTable TableName$Obj ) {$poptop Table implEditObjClearMultipleNullMembers$
			set$OptionalOrRequired$$RelationTypeTag$$Suffix$( (I$DefSchemaName$$reference ToTable TableName$Obj)value );
		}</GenRule>

	<GenRule GenDef="Table" Name="implEditObjClearMultipleNullMembers"
		>$iterate ContainerRelations( each implEditObjClearRelationMember empty empty )$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjClearRelationMember">
			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;$iterate Columns( each implEditObjClearRelationMemberSetRecOptionalAttrNull )$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjClearRelationMemberSetRecOptionalAttrNull"
		>$switch FromColDefIsNullable yes implEditObjClearRelationMemberSetRecAttrNull default empty$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjClearRelationMemberSetRecAttrNull">
			get$reference Relation reference FromTable TableName$Rec().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( null );</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjInvokeNarrowestSingletonAccessor">
			set$OptionalOrRequired$$RelationTypeTag$$Suffix$( (I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj)value );</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjInvokeNarrowestSingletonNullAccessor">
			set$OptionalOrRequired$$RelationTypeTag$$Suffix$( null );</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjInvokeNarrowedSetter">
		set$reference Narrowed OptionalOrRequired$$reference Narrowed RelationTypeTag$$reference Narrowed Suffix$( value );</GenRule>

	<GenRule GenDef="Table" Name="maybeImplEditObjNarrowedContainerAccessors"
		>$switch ContainerStyle
			Single maybeImplEditObjNarrowedSingleContainerAccessors
			Multiple maybeImplEditObjNarrowedMultipleContainerAccessors
			default empty$</GenRule>

	<GenRule GenDef="Table" Name="maybeImplEditObjNarrowedSingleContainerAccessors"
		>$switch DoesContainerRelationNarrow yes implEditObjNarrowedSingleContainerAccessors default empty$</GenRule>

	<GenRule GenDef="Table" Name="maybeImplEditObjNarrowedMultipleContainerAccessors"
		>$switch DoesContainerRelationNarrow yes implEditObjNarrowedMultipleContainerAccessors default empty$</GenRule>

	<GenRule GenDef="Table" Name="DoesContainerRelationNarrow"
		>$switch DoesContainerRelationNarrowInternal
			yes ContainerNarrowYes
			no ContainerNarrowNo
			default ContainerNarrowNo$</GenRule>

	<GenRule GenDef="Table" Name="DoesContainerRelationNarrowInternal"
		>$iterate ContainerRelations( lone HasNarrowed empty ContainerNarrowNo each ContainerNarrowYada )$</GenRule>

	<GenRule GenDef="Table" Name="DoesContainerRelationNarrowMultiple"
		>$iterate ContainerRelations( first HasNarrowed each empty empty empty )$</GenRule>

	<GenRule GenDef="Table" Name="DoesContainerRelationNarrowSingle"
		>$iterate ContainerRelations( lone HasNarrowed each empty empty empty )$</GenRule>

	<GenRule GenDef="Object" Name="ContainerNarrowNo">no</GenRule>
	<GenRule GenDef="Object" Name="ContainerNarrowYes">yes</GenRule>
	<GenRule GenDef="Object" Name="ContainerNarrowYada">yada</GenRule>


	<GenRule GenDef="Relation" Name="implEditObjRelationSingletonGetClearNull"
		>$switch RelationTypeTag Container implEditObjRelationSingletonGetClearContainer Owner implEditObjRelationSingletonGetClearContainer default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSingletonGetClearContainer">
				$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;$iterate Columns( each implEditObjRelationSingletonClearContainerAttr )$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationSingletonClearContainerAttr"
		>$switch FromColDefIsNullable yes implEditObjClearRelationSingletonContainerAttr default empty$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjClearRelationSingletonContainerAttr">
				get$reference Relation reference FromTable TableName$Rec().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( null );</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationSingletonAccessorsGetRestoreRecAttr">
					get$reference Relation reference FromTable TableName$Rec().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( obj.get$reference ToCol switch IsNullable yes implOptional default implRequired$$reference ToCol Name$() );</GenRule>


	<GenRule GenDef="Relation" Name="implEditObjRelationSetSingletonClearNull"
		>$switch RelationTypeTag Container implEditObjRelationSetSingletonClearContainer Owner implEditObjRelationSetSingletonClearContainer default empty$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSetSingletonClearContainer">
			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;$iterate Columns( each implEditObjRelationSetSingletonClearContainerAttr )$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationSetSingletonClearContainerAttr"
		>$switch FromColDefIsNullable yes implEditObjClearRelationSetSingletonContainerAttr default empty$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjClearRelationSetSingletonContainerAttr">
			get$reference Relation reference FromTable TableName$Rec().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( null );</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSinglettonGetClearAllContainers"
		>$poptop Table iterate Relation( each implEditObjRelationSingletonGetClearNull )$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSingletonGetRestoreObj">
				if( obj != null ) {$iterate Columns( each implEditObjRelationSingletonAccessorsGetRestoreRecAttr )$
					$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = obj;
				}</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSingletonAccessors">
	@Override
	public I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj get$OptionalOrRequired$$RelationTypeTag$$Suffix$() {
		return( get$OptionalOrRequired$$RelationTypeTag$$Suffix$( false ) );
	}

	@Override
	public I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj get$OptionalOrRequired$$RelationTypeTag$$Suffix$( boolean forceRead ) {
		if( forceRead || ( $leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ == null ) ) {
			boolean anyMissing = false;
$iterate Columns( each implEditObjRelationAccessorCheckIfColumnProvided empty empty )
$			if( ! anyMissing ) {
				I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj obj = ((I$SchemaName$SchemaObj)getOrigAs$TableName$().getSchema()).get$reference ToTable TableName$TableObj().read$reference ToTable TableName$By$reference ToIndex Suffix$( $iterate Columns( first implObjRelationAccessorsPassArg each implObjRelationAccessorsCommaPassArg empty empty )$ );
				$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = obj;$switch RelationTypeTag Container implEditObjRelationSingletonGetRestoreObj default empty$
			}
		}
		return( $leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ );
	}

	@Override
	public void set$OptionalOrRequired$$RelationTypeTag$$Suffix$( I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj value ) {
			if( rec == null ) {
				get$reference FromTable TableName$Rec();
			}
			if( value != null ) {
$iterate Columns( each implEditObjRelationSingletonAccessorsSetRecAttr )
$			}$switch RelationTypeTag Container empty Owner empty default implEditObjRelationSetSingletonElseClearNull$
			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = value;$switch HasNarrowed yes implEditObjRelationSetSingletonInvokeSuperNarrowed default empty$
	}
</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSetSingletonElseClearNull">
			else {
$iterate Columns( each implEditObjRelationSingletonAccessorsSetRecOptionalAttrNull )
$			}</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSetSingletonClearAllContainers"
		>$poptop Table iterate Relation( each implEditObjRelationSetSingletonClearNull )$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationSetSingletonInvokeSuperNarrowed">
			super.set$reference Narrowed OptionalOrRequired$$reference Narrowed RelationTypeTag$$reference Narrowed Suffix$( value );</GenRule>

	<GenRule GenDef="RelationCol" Name="FromColInPrimaryIndex"
		>$reference FromCol ColumnInPrimaryIndex$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationSingletonAccessorsSetRecAttr"
		>$switch FromColInPrimaryIndex yes implEditObjRelationSingletonAccessorsSetRecAndPKeyAttr default implEditObjRelationSingletonAccessorsSetRecOnlyAttr$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationSingletonAccessorsSetRecAndPKeyAttr"
>				getPKey().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( value.get$reference ToCol switch IsNullable yes implOptional default implRequired$$reference ToCol Name$() );
				get$reference Relation reference FromTable TableName$Rec().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( value.get$reference ToCol switch IsNullable yes implOptional default implRequired$$reference ToCol Name$() );
</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationSingletonAccessorsSetRecOnlyAttr"
>				get$reference Relation reference FromTable TableName$Rec().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( value.get$reference ToCol switch IsNullable yes implOptional default implRequired$$reference ToCol Name$() );
</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationSingletonAccessorsSetRecOptionalAttrNull"
		>$switch FromColDefIsNullable yes implEditObjRelationSingletonAccessorsSetRecAttrNull default empty$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationSingletonAccessorsSetRecAttrNull"
>				get$reference Relation reference FromTable TableName$Rec().set$reference FromCol switch IsNullable yes implOptional default implRequired$$reference FromCol Name$( null );
</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationAccessorsPassArg"
		>$reference FromCol switch ColumnInPrimaryIndex yes implEditObjRelationAccessorsPKey default implEditObjRelationAccessorsRec$.get$reference FromCol OptionalOrRequired$$reference FromCol Name$()</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationAccessorsToColIsNullable"
		>$reference ToCol IsNullable$</GenRule>
	<GenRule GenDef="RelationCol" Name="implEditObjRelationAccessorsFromColIsNullable"
		>$reference FromCol IsNullable$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationAccessorsCommaPassArg">,
					$implEditObjRelationAccessorsPassArg$</GenRule>

	<GenRule GenDef="Object" Name="implEditObjRelationAccessorsPKey">getPKey()</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationAccessorsRec">get$reference Relation reference FromTable TableName$Rec()</GenRule>

	<GenRule GenDef="Object" Name="implEditObjRelationAccessorsRec">get$popto Table TableName$Rec()</GenRule>

	<GenRule GenDef="Object" Name="implEditObjRelationAccessorInitDataAttr"
		>$switch ColumnInPrimaryIndex yes empty default implEditObjRelationAccessorInitDataAttrValue$</GenRule>
	<GenRule GenDef="Object" Name="implEditObjRelationAccessorInitDataAttrValue"
>				data.set$switch IsNullable yes implOptional default implRequired$$Name$( rec.get$switch IsNullable yes implOptional default implRequired$$Name$() );
</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationAccessorCheckIfColumnProvided"
		>$switch implEditObjRelationAccessorsToColIsNullable yes empty default implEditObjRelationAccessorCheckIfReqColProvided$</GenRule>

	<GenRule GenDef="RelationCol" Name="implEditObjRelationAccessorCheckIfReqColProvided"
		>$switch IsNullable yes implEditObjRelationAccessorCheckIfNullableNull default empty$</GenRule>

	<GenRule GenDef="Object" Name="implEditObjRelationAccessorCheckIfNullableNull"
>			if( get$TableName$Rec().get$switch IsNullable yes implOptional default implRequired$$Name$() == null ) {
				anyMissing = true;
			}
</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjRelationCollectionAccessors">
	@Override
	public List&lt;I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj&gt; get$OptionalOrRequired$$RelationTypeTag$$Suffix$() {
		List&lt;I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj&gt; retval;
		retval = ((I$SchemaName$SchemaObj)getOrigAs$TableName$().getSchema()).get$reference ToTable TableName$TableObj().read$reference ToTable TableName$By$reference ToIndex Suffix$( $iterate Columns( first implObjRelationAccessorsPassArg each implObjRelationAccessorsCommaPassArg empty empty )$,
			false );
		return( retval );
	}

	@Override
	public List&lt;I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj&gt; get$OptionalOrRequired$$RelationTypeTag$$Suffix$( boolean forceRead ) {
		List&lt;I$reference ToTable DefSchemaName$$reference ToTable TableName$Obj&gt; retval;
		retval = ((I$SchemaName$SchemaObj)getOrigAs$TableName$().getSchema()).get$reference ToTable TableName$TableObj().read$reference ToTable TableName$By$reference ToIndex Suffix$( $iterate Columns( first implObjRelationAccessorsPassArg each implObjRelationAccessorsCommaPassArg empty empty )$,
			forceRead );
		return( retval );
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjColumnBaseRWPKeyAccessor">$reference Column implEditObjColumnBaseRWPKeyAccessor$</GenRule>
	
	<GenRule GenDef="TableCol" Name="implEditObjColumnBaseRWPKeyAccessor"
		>$switch HasSuperClassRelation no implEditObjColumnRWPKeyAccessor default empty$</GenRule>
	<GenRule GenDef="Atom" Name="implEditObjColumnBaseRWPKeyAccessor"
		>$switch HasSuperClassRelation no implEditObjColumnRWPKeyAccessor default empty$</GenRule>

	<GenRule GenDef="TableCol" Name="implEditObjColumnRWAccessor"
		>$switch ColumnInPrimaryIndex yes implEditObjColumnRWPKeyAccessor default implEditObjColumnRWDataAccessor$</GenRule>
	<GenRule GenDef="Atom" Name="implEditObjColumnRWAccessor"
		>$switch ColumnInPrimaryIndex yes implEditObjColumnRWPKeyAccessor default implEditObjColumnRWDataAccessor$</GenRule>

	<GenRule GenDef="IndexCol" Name="implPKeyEditObjColumnAccessorsDirect">$reference Column implPKeyEditObjColumnAccessorsDirect$</GenRule>
	
	<GenRule GenDef="TableCol" Name="implPKeyEditObjColumnAccessorsDirect">
	@Override
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( getPKey() );
	}

	@Override
	public void set$implColumnAttrOptionality$$Name$($implJavaAtomType$ $leadlower Name$) {
		if (getPKey() != $leadlower Name$) {
			setPKey($leadlower Name$);
$switch ColumnInAnyRelation yes implEditObjColumnRWDataAccessorClearRelations default empty
$		}
	}
</GenRule>

	<GenRule GenDef="Atom" Name="implPKeyEditObjColumnAccessorsDirect">
	@Override
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( getPKey() );
	}

	@Override
	public void set$implColumnAttrOptionality$$Name$($implJavaAtomType$ $leadlower Name$) {
		if (getPKey() != $leadlower Name$) {
			setPKey($leadlower Name$);
$switch ColumnInAnyRelation yes implEditObjColumnRWDataAccessorClearRelations default empty
$		}
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjColumnRWPKeyAccessor">$reference Column implEditObjColumnRWPKeyAccessor$</GenRule>

	<GenRule GenDef="TableCol" Name="implEditObjColumnRWPKeyAccessor">
	@Override
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( getPKey().get$implColumnAttrOptionality$$Name$() );
	}

	@Override
	public void set$implColumnAttrOptionality$$Name$($implJavaAtomType$ $leadlower Name$) {
		if ((getPKey().get$implColumnAttrOptionality$$Name$() != $leadlower Name$ ) || ( get$TableName$Rec().get$implColumnAttrOptionality$$Name$() != $leadlower Name$ )) {
			getPKey().set$implColumnAttrOptionality$$Name$($leadlower Name$);
			get$TableName$Rec().set$implColumnAttrOptionality$$Name$( $leadlower Name$ );
$switch ColumnInAnyRelation yes implEditObjColumnRWDataAccessorClearRelations default empty
$		}
	}
</GenRule>

	<GenRule GenDef="Atom" Name="implEditObjColumnRWPKeyAccessor">
	@Override
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( getPKey().get$implColumnAttrOptionality$$Name$() );
	}

	@Override
	public void set$implColumnAttrOptionality$$Name$($implJavaAtomType$ $leadlower Name$) {
		getPKey().set$implColumnAttrOptionality$$Name$($leadlower Name$);
		if( get$TableName$Rec().get$implColumnAttrOptionality$$Name$() != value ) {
			get$TableName$Rec().set$implColumnAttrOptionality$$Name$( value );
		}
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjColumnDataAccessor">$reference Column implEditObjColumnDataAccessor$</GenRule>
	<GenRule GenDef="TableCol" Name="implEditObjColumnDataAccessor"
		>$switch ColumnInAnyRelation yes implEditObjColumnRWDataAccessor default implEditObjColumnRWDataAccessor$</GenRule>
	<GenRule GenDef="Atom" Name="implEditObjColumnDataAccessor"
		>$switch ColumnInAnyRelation yes implEditObjColumnRWDataAccessor default implEditObjColumnRWDataAccessor$</GenRule>

	<GenRule GenDef="Object" Name="implEditObjColumnRODataAccessor">
	@Override
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( get$TableName$Rec().get$implColumnAttrOptionality$$Name$() );
	}
</GenRule>

	<GenRule GenDef="Object" Name="implEditObjColumnRWDataAccessor">
	@Override
	public $implJavaAtomType$ get$implColumnAttrOptionality$$Name$() {
		return( get$TableName$Rec().get$implColumnAttrOptionality$$Name$() );
	}

	@Override
	public void set$implColumnAttrOptionality$$Name$( $implJavaAtomType$ value ) {
		if( get$TableName$Rec().get$implColumnAttrOptionality$$Name$() != value ) {
			get$TableName$Rec().set$implColumnAttrOptionality$$Name$( value );
$switch ColumnInAnyRelation yes implEditObjColumnRWDataAccessorClearRelations default empty
$		}
	}
</GenRule>

	<GenRule GenDef="Object" Name="implEditObjColumnRWDataAccessorClearRelations"
		>$popto Table iterate Relation( each implEditObjColumnRWDataAccessorClearRelation empty empty )$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjColumnRWDataAccessorClearRelation"
		>$switch RelationTypeTag
			Superclass empty
			default implEditObjColumnRWDataAccessorReallyClearRelation$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjColumnRWDataAccessorReallyClearRelation"
>			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjInheritSuperClass"
>
	extends $reference SuperClassRelation reference ToTable SchemaName$$reference SuperClassRelation reference ToTable TableName$EditObj
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjConstructorInvokeSuperOrig">
		super( argOrig );</GenRule>

	<GenRule GenDef="Table" Name="implEditObjTableRecAttr">
	protected I$DefSchemaName$$TableName$ rec;</GenRule>

	<GenRule GenDef="Table" Name="implEditObjPKeyAccessors">
	@Override
	public $ICompactedPrimaryIndexClass$ getPKey() {
		return( orig.getPKey() );
	}

	@Override
	public void setPKey( $ICompactedPrimaryIndexClass$ value ) {
		orig.setPKey( value );
		copyPKeyToRec();
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjRealise">
	@Override
	public I$reference BaseClass DefSchemaName$$reference BaseClass TableName$Obj realise() {
		// We realise this so that it's record will get copied to orig during realization
		I$DefSchemaName$$TableName$Obj retobj = getSchema().get$TableName$TableObj().realise$TableName$( (I$SchemaName$$TableName$Obj)this );
		return( retobj );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjForget">
	@Override
	public void forget() {
		getOrigAs$TableName$().forget();
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjRead">
	@Override
	public I$DefSchemaName$$TableName$Obj read() {
		I$DefSchemaName$$TableName$Obj retval = getOrigAs$TableName$().read();
		if( retval != orig ) {
			throw new CFLibStaleCacheDetectedException( getClass(),	"read" );
		}
		copyOrigToRec();
		return( retval );
	}

	@Override
	public I$DefSchemaName$$TableName$Obj read( boolean forceRead ) {
		I$DefSchemaName$$TableName$Obj retval = getOrigAs$TableName$().read( forceRead );
		if( retval != orig ) {
			throw new CFLibStaleCacheDetectedException( getClass(),	"read" );
		}
		copyOrigToRec();
		return( retval );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjCreateCopyPKey">
		copyPKeyToRec();</GenRule>

	<GenRule GenDef="Table" Name="implEditObjCreateCopyOrigPKey">
		orig.copyRecToPKey();</GenRule>

	<GenRule GenDef="Table" Name="implEditObjCreate">
	@Override
	public I$reference BaseClass DefSchemaName$$reference BaseClass TableName$Obj create() {$switch PrimaryKeyIsConstEnum yes implEditObjCreateCopyPKey default empty $
		copyRecToOrig();$switch PrimaryKeyIsConstEnum yes implEditObjCreateCopyOrigPKey default empty$
		I$DefSchemaName$$TableName$Obj retobj = ((I$SchemaName$SchemaObj)getOrigAs$TableName$().getSchema()).get$TableName$TableObj().create$TableName$( getOrigAs$TableName$() );
		if( retobj == getOrigAs$TableName$() ) {
			copyOrigToRec();
		}
		return( retobj );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjCopyRecToOrig">
	@Override
	public void copyRecToOrig() {
		I$DefSchemaName$$TableName$ origRec = getOrigAs$TableName$().get$TableName$Rec();
		I$DefSchemaName$$TableName$ myRec = get$TableName$Rec();
		origRec.set( myRec );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjCopyOrigToRec">
	@Override
	public void copyOrigToRec() {
		I$DefSchemaName$$TableName$ origRec = getOrigAs$TableName$().get$TableName$Rec();
		I$DefSchemaName$$TableName$ myRec = get$TableName$Rec();
		myRec.set( origRec );
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjReadPassPKeyArg"
		>getPKey().get$OptionalOrRequired$$Name$()</GenRule>
	<GenRule GenDef="IndexCol" Name="implEditObjReadCommaPassPKeyArg">,
			$implEditObjReadPassPKeyArg$</GenRule>

	<GenRule GenDef="Table" Name="implEditObjUpdate">
	@Override
	public $reference BaseClass DefSchemaName$$reference BaseClass TableName$EditObj update() {
		getSchema().get$TableName$TableObj().update$TableName$( (I$DefSchemaName$$TableName$Obj)this );
		return( null );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjDelete">
	@Override
	public $reference BaseClass DefSchemaName$$reference BaseClass TableName$EditObj deleteInstance() {$implEditObjDeleteCheckNotNew$
		getSchema().get$TableName$TableObj().delete$TableName$( getOrigAs$TableName$() );
		return( null );
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjDeleteCheckNotNew">
		if( getIsNew() ) {
			throw new CFLibCannotDeleteNewInstanceException( getClass(), "delete" );
		}</GenRule>

	<GenRule GenDef="Table" Name="implEditObjCopyPKeyToRec">
	@Override
	public void copyPKeyToRec() {
		if( rec != null ) {$reference PrimaryKeyIndex iterate Columns( lone implCopyPKeyDirectToRec each implObjCopyPKeyAttrToRec empty empty )$
		}
	}
</GenRule>

	<GenRule GenDef="Table" Name="implEditObjCopyRecClassCodeToPKey">
		getPKey().setClassCode( rec.getClassCode() );</GenRule>

	<GenRule GenDef="Table" Name="implEditObjCopyRecToPKey">
	@Override
	public void copyRecToPKey() {$reference PrimaryKeyIndex iterate Columns( lone implObjCopyRecAttrDirectToPKey each implObjCopyRecAttrToPKey empty empty )$
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjCopyRecAttrToPKey">
		getPKey().set$implColumnAttrOptionality$$Name$( rec.get$implColumnAttrOptionality$$Name$() );</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjCopyPKeyAttrToRec">
		rec.set$implColumnAttrOptionality$$Name$( getPKey().get$implColumnAttrOptionality$$Name$() );</GenRule>

	<GenRule GenDef="Table" Name="implEditObjRecAccessors">
	@Override
	public I$DefSchemaName$$reference BaseClass TableName$ getRec() {
		if( rec == null ) {
			rec = getOrigAs$TableName$().getSchema().get$DefSchemaName$BackingStore().getFactory$TableName$().newRec();
			rec.set( orig.getRec() );
		}
		return( rec );
	}

	@Override
	public void setRec( I$DefSchemaName$$reference BaseClass TableName$ value ) {
		if( rec != value ) {$switch HasSuperClassRelation yes invokeEditObjSuperSetRec default invokeEditObjBaseSetRec$
$iterate Relation( each implEditObjTableDataAccessorsClearRelationMember empty empty )
$		}
	}
</GenRule>

	<GenRule GenDef="Table" Name="invokeEditObjSuperSetRec">
			super.setRec( value );</GenRule>

	<GenRule GenDef="Table" Name="invokeEditObjBaseSetRec">
			rec = value;</GenRule>

	<GenRule GenDef="Table" Name="implEditObjTableRecAccessors">
	@Override
	public I$DefSchemaName$$TableName$ get$TableName$Rec() {
		return( (I$DefSchemaName$$TableName$)getRec() );
	}
</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjTableDataAccessorsCommaPassArg">,
					$switch ColumnInPrimaryIndex yes implEditObjTableDataAccessorsPKey default implEditObjTableDataAccessorsData$.get$OptionalOrRequired$$Name$()</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjTableDataAccessorsPKey">getPKey()</GenRule>

	<GenRule GenDef="IndexCol" Name="implEditObjTableDataAccessorsRec">$leadlower reference Table TableName$Rec</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjTableDataAccessorsClearRelationMember"
		>$switch RelationTypeTag
			Superclass empty
			Details empty
			Components empty
			Children empty
			default implEditObjTableDataAccessorsReallyClearMember$</GenRule>

	<GenRule GenDef="Relation" Name="implEditObjTableDataAccessorsReallyClearMember"
>			$leadlower OptionalOrRequired$$RelationTypeTag$$Suffix$ = null;
</GenRule>

</RuleSet>
